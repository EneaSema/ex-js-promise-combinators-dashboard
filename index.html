<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard della citt√†</title>
    <script src="snack5.js"></script>
  </head>
  <body>
    <h1>Dashboard della citt√†</h1>

    <ul>
      In questo esercizio, utilizzerai Promise.all() per creare la funzione
      getDashboardData(query), che accetta una citt√† come input e recupera
      simultaneamente:
      <li>
        Nome completo della citt√† e paese da
        <b>/destinations?search=[query]</b> (result.name, result.country, nelle
        nuove propriet√† city e country).
      </li>
      <li>
        Il meteo attuale da <b>/weathers?search={query}</b> (result.temperature
        e result.weather_description nella nuove propriet√† temperature e
        weather).
      </li>
      <li>
        Il nome dell‚Äôaeroporto principale da
        <b>/airports?search={query}</b> (result.name nella nuova propriet√†
        airport).
      </li>
    </ul>
    Utilizzerai <b>Promise.all()</b> per eseguire queste richieste in parallelo
    e poi restituirai un oggetto con i dati aggregati.

    <h2>
      Attenzione: le chiamate sono delle ricerche e ritornano un‚Äôarray ciascuna,
      di cui devi prendere il primo risultato (il primo elemento).
    </h2>
    <h3><b>Note del docente</b></h3>
    <ul>
      Scrivi la funzione
      <b>getDashboardData(query)</b
      >, che deve:
      <li>Essere asincrona <b>(async)</b>.</li>
      <li>
        Utilizzare <b>Promise.all()</b> che risolve un oggetto contenente i dati
        aggregati.
      </li>
      <li>
        Restituire una <b>Promise</b> che risolve un oggetto contenente i dati
        aggregati.
      </li>
      <li>Stampare i dati in console in un messaggio ben formattato.</li>
      <li>Testa la funzione con la query "london"</li>
    </ul>
    <h2><b>üéØ Bonus 1 - Risultato vuoto</b></h2>
    <p>
      <b>Se l‚Äôarray di ricerca √® vuoto</b> , invece di far fallire l'intera
      funzione, semplicemente i dati relativi a quella chiamata verranno settati
      a null e la frase relativa non viene stampata. Testa la funzione con la
      query ‚Äúvienna‚Äù (non trova il meteo).
    </p>
    <h2><b>üéØ Bonus 2 - Chiamate fallite</b></h2>
    <p>
      Attualmente, se una delle chiamate fallisce, **Promise.all()** rigetta
      l'intera operazione.
    </p>
    <ul>
      Modifica `getDashboardData()` per usare **Promise.allSettled()**, in modo
      che:
      <li>
        <b>Se una chiamata fallisce,</b>
        i dati relativi a quella chiamata verranno settati a null.
      </li>
      <li>
        Stampa in console un messaggio di errore per ogni richiesta fallita.
      </li>
      <li>
        Testa la funzione con un link fittizio per il meteo (es.
        https://www.meteofittizio.it).
      </li>
    </ul>
  </body>
</html>
